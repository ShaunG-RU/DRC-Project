Version 4
SHEET 1 21492 10440
WIRE 672 -2752 640 -2752
WIRE 1568 -2752 1424 -2752
WIRE 2304 -2736 2304 -2768
WIRE 2480 -2736 2480 -2768
WIRE 640 -2688 640 -2752
WIRE 1424 -2688 1424 -2752
WIRE 2304 -2608 2304 -2656
WIRE 2480 -2608 2480 -2656
WIRE 10128 -2592 10096 -2592
WIRE 10240 -2592 10208 -2592
WIRE 640 -2576 640 -2608
WIRE 1424 -2544 1424 -2608
WIRE 11888 -2496 11744 -2496
WIRE 9648 -2464 9648 -2544
WIRE 11360 -2464 11360 -2512
WIRE 12368 -2464 12320 -2464
WIRE 12496 -2464 12448 -2464
WIRE 672 -2448 640 -2448
WIRE 10176 -2432 10176 -2464
WIRE 2304 -2416 2304 -2464
WIRE 2464 -2416 2464 -2464
WIRE 9760 -2416 9680 -2416
WIRE 9872 -2416 9760 -2416
WIRE 9968 -2416 9872 -2416
WIRE 10096 -2416 10096 -2592
WIRE 10096 -2416 10048 -2416
WIRE 10144 -2416 10096 -2416
WIRE 10240 -2400 10240 -2592
WIRE 10240 -2400 10208 -2400
WIRE 10352 -2400 10240 -2400
WIRE 12032 -2400 11984 -2400
WIRE 640 -2384 640 -2448
WIRE 7264 -2384 7120 -2384
WIRE 9872 -2384 9872 -2416
WIRE 10144 -2384 10096 -2384
WIRE 11568 -2368 11504 -2368
WIRE 6752 -2352 6752 -2400
WIRE 7520 -2352 7440 -2352
WIRE 7680 -2352 7584 -2352
WIRE 10096 -2352 10096 -2384
WIRE 11360 -2336 11360 -2384
WIRE 11824 -2336 11824 -2368
WIRE 11744 -2320 11744 -2496
WIRE 11792 -2320 11744 -2320
WIRE 12400 -2320 12400 -2352
WIRE 2304 -2304 2304 -2336
WIRE 2464 -2304 2464 -2336
WIRE 10176 -2304 10176 -2368
WIRE 11888 -2304 11888 -2496
WIRE 11888 -2304 11856 -2304
WIRE 11984 -2304 11984 -2400
WIRE 11984 -2304 11888 -2304
WIRE 12048 -2304 11984 -2304
WIRE 12160 -2304 12048 -2304
WIRE 12320 -2304 12320 -2464
WIRE 12320 -2304 12240 -2304
WIRE 12368 -2304 12320 -2304
WIRE 9648 -2288 9648 -2368
WIRE 9872 -2288 9872 -2320
WIRE 11504 -2288 11504 -2368
WIRE 11504 -2288 11392 -2288
WIRE 11664 -2288 11504 -2288
WIRE 11792 -2288 11664 -2288
WIRE 12496 -2288 12496 -2464
WIRE 12496 -2288 12432 -2288
WIRE 12688 -2288 12496 -2288
WIRE 640 -2272 640 -2304
WIRE 12368 -2272 12288 -2272
WIRE 11664 -2256 11664 -2288
WIRE 6960 -2240 6896 -2240
WIRE 6752 -2224 6752 -2272
WIRE 7200 -2224 7200 -2256
WIRE 7120 -2208 7120 -2384
WIRE 7168 -2208 7120 -2208
WIRE 7552 -2208 7552 -2240
WIRE 11824 -2208 11824 -2272
WIRE 7264 -2192 7264 -2384
WIRE 7264 -2192 7232 -2192
WIRE 7312 -2192 7264 -2192
WIRE 7440 -2192 7440 -2352
WIRE 7440 -2192 7392 -2192
WIRE 7520 -2192 7440 -2192
WIRE 10240 -2192 10096 -2192
WIRE 12400 -2192 12400 -2256
WIRE 768 -2176 640 -2176
WIRE 6896 -2176 6896 -2240
WIRE 6896 -2176 6784 -2176
WIRE 7088 -2176 6896 -2176
WIRE 7168 -2176 7088 -2176
WIRE 7680 -2176 7680 -2352
WIRE 7680 -2176 7584 -2176
WIRE 7792 -2176 7680 -2176
WIRE 12288 -2176 12288 -2272
WIRE 2304 -2160 2304 -2192
WIRE 7520 -2160 7504 -2160
WIRE 11360 -2160 11360 -2240
WIRE 11664 -2160 11664 -2192
WIRE 2480 -2144 2480 -2192
WIRE 9760 -2144 9760 -2416
WIRE 9936 -2144 9760 -2144
WIRE 1632 -2128 1424 -2128
WIRE 7088 -2128 7088 -2176
WIRE 7504 -2128 7504 -2160
WIRE 640 -2096 640 -2176
WIRE 7200 -2096 7200 -2160
WIRE 1424 -2080 1424 -2128
WIRE 7552 -2080 7552 -2144
WIRE 10176 -2064 10176 -2096
WIRE 6752 -2048 6752 -2128
WIRE 10096 -2048 10096 -2192
WIRE 10144 -2048 10096 -2048
WIRE 2304 -2032 2304 -2080
WIRE 2480 -2032 2480 -2064
WIRE 10240 -2032 10240 -2192
WIRE 10240 -2032 10208 -2032
WIRE 10288 -2032 10240 -2032
WIRE 7088 -2016 7088 -2064
WIRE 9760 -2016 9760 -2144
WIRE 10144 -2016 9760 -2016
WIRE 640 -1984 640 -2016
WIRE 12368 -1984 12320 -1984
WIRE 12496 -1984 12448 -1984
WIRE 1424 -1936 1424 -2000
WIRE 10176 -1936 10176 -2000
WIRE 0 -1840 -32 -1840
WIRE 656 -1840 624 -1840
WIRE 12400 -1840 12400 -1872
WIRE 12048 -1824 12048 -2304
WIRE 12160 -1824 12048 -1824
WIRE 12320 -1824 12320 -1984
WIRE 12320 -1824 12240 -1824
WIRE 12368 -1824 12320 -1824
WIRE 12496 -1808 12496 -1984
WIRE 12496 -1808 12432 -1808
WIRE 12560 -1808 12496 -1808
WIRE 12368 -1792 12288 -1792
WIRE -32 -1776 -32 -1840
WIRE 624 -1776 624 -1840
WIRE 12400 -1712 12400 -1776
WIRE 12288 -1696 12288 -1792
WIRE -32 -1664 -32 -1696
WIRE 624 -1664 624 -1696
WIRE 11856 -720 11760 -720
WIRE 12976 -608 12832 -608
WIRE 13328 -608 13184 -608
WIRE 11968 -592 11920 -592
WIRE 12080 -592 12048 -592
WIRE 12112 -592 12080 -592
WIRE 12240 -592 12192 -592
WIRE 13632 -592 13600 -592
WIRE 13744 -592 13712 -592
WIRE 4384 -576 4336 -576
WIRE 4496 -576 4464 -576
WIRE 4576 -576 4496 -576
WIRE 4720 -576 4656 -576
WIRE 14160 -544 14128 -544
WIRE 14272 -544 14240 -544
WIRE 11920 -528 11920 -592
WIRE 4336 -512 4336 -576
WIRE 13872 -496 13808 -496
WIRE 12912 -448 12912 -480
WIRE 13264 -448 13264 -480
WIRE 12160 -432 12160 -448
WIRE 12832 -432 12832 -608
WIRE 12880 -432 12832 -432
WIRE 13184 -432 13184 -608
WIRE 13232 -432 13184 -432
WIRE 13680 -432 13680 -464
WIRE 4608 -416 4608 -448
WIRE 12080 -416 12080 -592
WIRE 12128 -416 12080 -416
WIRE 12976 -416 12976 -608
WIRE 12976 -416 12944 -416
WIRE 13328 -416 13328 -608
WIRE 13328 -416 13296 -416
WIRE 13376 -416 13328 -416
WIRE 13424 -416 13376 -416
WIRE 13600 -416 13600 -592
WIRE 13600 -416 13504 -416
WIRE 13648 -416 13600 -416
WIRE 14208 -416 14208 -432
WIRE 4496 -400 4496 -576
WIRE 4576 -400 4496 -400
WIRE 12240 -400 12240 -592
WIRE 12240 -400 12192 -400
WIRE 12352 -400 12240 -400
WIRE 12528 -400 12432 -400
WIRE 12704 -400 12592 -400
WIRE 12832 -400 12704 -400
WIRE 12880 -400 12832 -400
WIRE 12976 -400 12976 -416
WIRE 13024 -400 12976 -400
WIRE 13152 -400 13104 -400
WIRE 13232 -400 13152 -400
WIRE 13744 -400 13744 -592
WIRE 13744 -400 13712 -400
WIRE 13808 -400 13808 -496
WIRE 13808 -400 13744 -400
WIRE 13968 -400 13808 -400
WIRE 14128 -400 14128 -544
WIRE 14128 -400 14048 -400
WIRE 14176 -400 14128 -400
WIRE 4720 -384 4720 -576
WIRE 4720 -384 4640 -384
WIRE 9856 -384 4720 -384
WIRE 11552 -384 9856 -384
WIRE 11728 -384 11632 -384
WIRE 11760 -384 11760 -720
WIRE 11760 -384 11728 -384
WIRE 11952 -384 11760 -384
WIRE 12128 -384 11952 -384
WIRE 13648 -384 13600 -384
WIRE 14272 -384 14272 -544
WIRE 14272 -384 14240 -384
WIRE 14384 -384 14272 -384
WIRE 4384 -368 4304 -368
WIRE 4496 -368 4464 -368
WIRE 4576 -368 4496 -368
WIRE 12704 -368 12704 -400
WIRE 14176 -368 14128 -368
WIRE 11952 -352 11952 -384
WIRE 12832 -352 12832 -400
WIRE 13152 -352 13152 -400
WIRE 13600 -352 13600 -384
WIRE 14128 -336 14128 -368
WIRE 12912 -320 12912 -384
WIRE 13264 -320 13264 -384
WIRE 12160 -304 12160 -368
WIRE 13680 -304 13680 -368
WIRE 4608 -288 4608 -352
WIRE 14208 -288 14208 -352
WIRE 4240 -272 4096 -272
WIRE 4496 -272 4496 -368
WIRE 4496 -272 4320 -272
WIRE 11840 -272 11840 -304
WIRE 11728 -256 11728 -384
WIRE 11808 -256 11728 -256
WIRE 12704 -256 12704 -288
WIRE 12832 -256 12832 -288
WIRE 13152 -256 13152 -288
WIRE 13376 -256 13376 -416
WIRE 13392 -256 13376 -256
WIRE 11952 -240 11952 -288
WIRE 11952 -240 11872 -240
WIRE 11808 -224 11728 -224
WIRE 9856 -192 9856 -384
WIRE 9984 -192 9856 -192
WIRE 11728 -192 11728 -224
WIRE 11840 -160 11840 -208
WIRE 20512 -160 20464 -160
WIRE 20992 -160 20944 -160
WIRE 21104 -160 21056 -160
WIRE 20512 -128 20512 -160
WIRE -896 -112 -960 -112
WIRE -576 -112 -816 -112
WIRE 2240 -112 2144 -112
WIRE 2368 -112 2304 -112
WIRE 16240 -80 16192 -80
WIRE 16464 -80 16240 -80
WIRE 17808 -64 17760 -64
WIRE 17920 -64 17888 -64
WIRE 18000 -64 17920 -64
WIRE 18144 -64 18080 -64
WIRE 20944 -64 20944 -160
WIRE 20944 -64 20864 -64
WIRE 20992 -64 20944 -64
WIRE 21104 -64 21104 -160
WIRE 21104 -64 21072 -64
WIRE 21152 -64 21104 -64
WIRE -1232 -32 -1376 -32
WIRE -960 -32 -960 -112
WIRE -896 -32 -960 -32
WIRE -720 -32 -832 -32
WIRE -320 -32 -368 -32
WIRE -208 -32 -240 -32
WIRE -1760 -16 -1824 -16
WIRE -1648 -16 -1680 -16
WIRE -1616 -16 -1648 -16
WIRE -1504 -16 -1536 -16
WIRE 18528 -16 18496 -16
WIRE 18640 -16 18608 -16
WIRE -208 0 -208 -32
WIRE -176 0 -208 0
WIRE -1824 16 -1824 -16
WIRE 2144 16 2144 -112
WIRE 2224 16 2144 16
WIRE 2368 16 2368 -112
WIRE 2368 16 2304 16
WIRE 16240 16 16240 -80
WIRE 20512 16 20512 -48
WIRE 20512 16 20480 16
WIRE 336 32 112 32
WIRE 560 32 400 32
WIRE 20096 32 20016 32
WIRE 20224 32 20160 32
WIRE 20416 32 20304 32
WIRE 20688 48 20480 48
WIRE 20416 64 20336 64
WIRE 20688 64 20688 48
WIRE 20336 80 20336 64
WIRE 20576 80 20480 80
WIRE 18032 96 18032 64
WIRE 20416 96 20224 96
WIRE 20976 96 20976 48
WIRE -1824 112 -1888 112
WIRE 17920 112 17920 -64
WIRE 18000 112 17920 112
WIRE 18576 112 18576 96
WIRE 20864 112 20864 -64
WIRE 20864 112 20480 112
WIRE 20944 112 20864 112
WIRE -1296 128 -1296 96
WIRE 18144 128 18144 -64
WIRE 18144 128 18064 128
WIRE 18384 128 18144 128
WIRE 18496 128 18496 -16
WIRE 18496 128 18464 128
WIRE 18544 128 18496 128
WIRE 21152 128 21152 -64
WIRE 21152 128 21008 128
WIRE 21280 128 21152 128
WIRE 21312 128 21280 128
WIRE -1568 144 -1568 112
WIRE -1376 144 -1376 -32
WIRE -1328 144 -1376 144
WIRE -848 144 -848 112
WIRE -288 144 -288 112
WIRE 16240 144 16240 96
WIRE 17808 144 17680 144
WIRE 17920 144 17888 144
WIRE 18000 144 17920 144
WIRE 18640 144 18640 -16
WIRE 18640 144 18608 144
WIRE 18736 144 18640 144
WIRE 20944 144 20816 144
WIRE -1648 160 -1648 -16
WIRE -1600 160 -1648 160
WIRE -1232 160 -1232 -32
WIRE -1232 160 -1264 160
WIRE -1136 160 -1232 160
WIRE -1104 160 -1136 160
WIRE -960 160 -960 -32
WIRE -960 160 -1024 160
WIRE -880 160 -960 160
WIRE -368 160 -368 -32
WIRE -320 160 -368 160
WIRE 18544 160 18496 160
WIRE 20816 160 20816 144
WIRE -1504 176 -1504 -16
WIRE -1504 176 -1536 176
WIRE -1328 176 -1504 176
WIRE -720 176 -720 -32
WIRE -720 176 -816 176
WIRE -672 176 -720 176
WIRE -576 176 -576 -112
WIRE -576 176 -608 176
WIRE -528 176 -576 176
WIRE -368 176 -368 160
WIRE -368 176 -448 176
WIRE -208 176 -208 0
WIRE -208 176 -256 176
WIRE 336 176 336 144
WIRE 2256 176 2256 144
WIRE 16976 176 16688 176
WIRE 21280 176 21280 128
WIRE -2048 192 -2128 192
WIRE -1888 192 -1888 112
WIRE -1888 192 -1984 192
WIRE -1696 192 -1888 192
WIRE -1600 192 -1696 192
WIRE -880 192 -896 192
WIRE -320 192 -336 192
WIRE -208 192 -208 176
WIRE -32 192 -208 192
WIRE 112 192 112 32
WIRE 112 192 48 192
WIRE 304 192 112 192
WIRE 2032 192 1888 192
WIRE 2144 192 2144 16
WIRE 2144 192 2112 192
WIRE 2224 192 2144 192
WIRE 16496 192 16496 96
WIRE 16528 192 16496 192
WIRE 18496 192 18496 160
WIRE -3216 208 -3280 208
WIRE 560 208 560 32
WIRE 560 208 368 208
WIRE 880 208 560 208
WIRE 2368 208 2368 16
WIRE 2368 208 2288 208
WIRE 2480 208 2368 208
WIRE 16720 208 16720 96
WIRE 16720 208 16688 208
WIRE -1696 224 -1696 192
WIRE -896 224 -896 192
WIRE -336 224 -336 192
WIRE 304 224 288 224
WIRE 2224 224 2144 224
WIRE 16528 224 16208 224
WIRE 18032 224 18032 160
WIRE 16720 240 16688 240
WIRE 16928 240 16800 240
WIRE 18576 240 18576 176
WIRE 20976 240 20976 160
WIRE -1296 256 -1296 192
WIRE 288 256 288 224
WIRE 16464 256 16464 -80
WIRE 16528 256 16464 256
WIRE -1568 272 -1568 208
WIRE -848 272 -848 208
WIRE -288 272 -288 208
WIRE 16928 272 16688 272
WIRE 17168 272 16928 272
WIRE 17440 272 17168 272
WIRE 17920 272 17920 144
WIRE 17920 272 17520 272
WIRE 20816 272 20816 240
WIRE -3280 288 -3280 208
WIRE 16368 288 16320 288
WIRE 16528 288 16448 288
WIRE 336 304 336 240
WIRE 2256 304 2256 240
WIRE 16768 304 16688 304
WIRE 21280 304 21280 256
WIRE 16320 320 16320 288
WIRE 16528 320 16320 320
WIRE -1696 336 -1696 304
WIRE 2032 336 2000 336
WIRE 2144 336 2144 224
WIRE 2144 336 2112 336
WIRE 16720 336 16688 336
WIRE 16800 336 16720 336
WIRE 16928 336 16928 272
WIRE 16928 336 16880 336
WIRE 16240 352 16240 336
WIRE 2144 368 2144 336
WIRE 2272 368 2144 368
WIRE 7952 368 7872 368
WIRE 17168 368 17168 272
WIRE 17264 368 17168 368
WIRE -1136 384 -1136 160
WIRE -896 384 -1136 384
WIRE -368 384 -368 176
WIRE -368 384 -816 384
WIRE 2144 400 2144 368
WIRE 2272 400 2272 368
WIRE 16768 400 16768 304
WIRE -3280 432 -3280 368
WIRE 8288 448 8240 448
WIRE 8416 448 8352 448
WIRE 16720 448 16720 336
WIRE 7952 464 7952 448
WIRE 2144 496 2144 480
WIRE 2272 496 2272 464
WIRE 2272 496 2144 496
WIRE 9600 496 9488 496
WIRE 16976 496 16976 176
WIRE 17072 496 16976 496
WIRE 17232 496 17072 496
WIRE 8784 512 8736 512
WIRE 8896 512 8864 512
WIRE 8976 512 8896 512
WIRE 9120 512 9056 512
WIRE 16608 528 16608 496
WIRE 8240 544 8240 448
WIRE 8272 544 8240 544
WIRE 8416 544 8416 448
WIRE 8416 544 8352 544
WIRE 12544 544 12400 544
WIRE 2144 560 2144 496
WIRE 7872 560 7872 368
WIRE 7872 560 7792 560
WIRE 8000 560 7872 560
WIRE 11360 560 11312 560
WIRE 11488 560 11440 560
WIRE 17072 560 17072 496
WIRE 17232 560 17232 496
WIRE 12912 576 12864 576
WIRE 13040 576 12992 576
WIRE 14864 576 14720 576
WIRE 16720 576 16720 528
WIRE 16720 576 16640 576
WIRE 12208 592 11712 592
WIRE 16720 608 16720 576
WIRE 7792 624 7792 560
WIRE 8000 624 8000 560
WIRE 9248 624 9200 624
WIRE 10144 624 9840 624
WIRE 17376 624 17376 576
WIRE 6192 640 6048 640
WIRE 9520 640 9520 624
WIRE 9648 640 9648 544
WIRE 9680 640 9648 640
WIRE 4928 656 4880 656
WIRE 5040 656 5008 656
WIRE 5072 656 5040 656
WIRE 5184 656 5152 656
WIRE 8560 656 8512 656
WIRE 9872 656 9872 544
WIRE 9872 656 9840 656
WIRE 7472 672 7424 672
WIRE 7600 672 7552 672
WIRE 9008 672 9008 640
WIRE 9600 672 9600 496
WIRE 9680 672 9600 672
WIRE 16608 672 16608 624
WIRE 17072 672 17072 640
WIRE 17232 672 17232 640
WIRE 17344 672 17232 672
WIRE 8320 688 8320 656
WIRE 8896 688 8896 512
WIRE 8976 688 8896 688
WIRE 9872 688 9840 688
WIRE 10080 688 9952 688
WIRE 8240 704 8240 544
WIRE 8288 704 8240 704
WIRE 9120 704 9120 512
WIRE 9120 704 9040 704
WIRE 9200 704 9200 624
WIRE 9200 704 9120 704
WIRE 9312 704 9200 704
WIRE 9680 704 9312 704
WIRE 11392 704 11392 672
WIRE 12480 704 12480 672
WIRE 14800 704 14800 672
WIRE 16720 704 16720 672
WIRE 7792 720 7792 704
WIRE 8032 720 7792 720
WIRE 8240 720 8240 704
WIRE 8240 720 8112 720
WIRE 8416 720 8416 544
WIRE 8416 720 8352 720
WIRE 8512 720 8512 656
WIRE 8512 720 8416 720
WIRE 8768 720 8512 720
WIRE 8896 720 8848 720
WIRE 8976 720 8896 720
WIRE 10080 720 9840 720
WIRE 10304 720 10080 720
WIRE 11120 720 11024 720
WIRE 11312 720 11312 560
WIRE 11312 720 11200 720
WIRE 11360 720 11312 720
WIRE 11984 720 11984 704
WIRE 12400 720 12400 544
WIRE 12448 720 12400 720
WIRE 12944 720 12944 688
WIRE 14720 720 14720 576
WIRE 14768 720 14720 720
WIRE 17232 720 17232 672
WIRE 8288 736 8256 736
WIRE 9520 736 9472 736
WIRE 9680 736 9600 736
WIRE 11488 736 11488 560
WIRE 11488 736 11424 736
WIRE 11536 736 11488 736
WIRE 11600 736 11536 736
WIRE 11712 736 11712 592
WIRE 11712 736 11664 736
WIRE 11776 736 11712 736
WIRE 11952 736 11856 736
WIRE 12544 736 12544 544
WIRE 12544 736 12512 736
WIRE 12656 736 12544 736
WIRE 12864 736 12864 576
WIRE 12864 736 12736 736
WIRE 12912 736 12864 736
WIRE 14864 736 14864 576
WIRE 14864 736 14832 736
WIRE 14928 736 14864 736
WIRE 9920 752 9840 752
WIRE 11360 752 11280 752
WIRE 12096 752 12016 752
WIRE 12208 752 12208 592
WIRE 12208 752 12160 752
WIRE 12352 752 12208 752
WIRE 12448 752 12352 752
WIRE 13040 752 13040 576
WIRE 13040 752 12976 752
WIRE 13120 752 13040 752
WIRE 14192 752 14064 752
WIRE 14448 752 14272 752
WIRE 14672 752 14448 752
WIRE 14768 752 14672 752
WIRE 17376 752 17376 720
WIRE 8000 768 8000 704
WIRE 8112 768 8000 768
WIRE 8256 768 8256 736
WIRE 8256 768 8192 768
WIRE 9472 768 9472 736
WIRE 9680 768 9472 768
WIRE 11952 768 11904 768
WIRE 12912 768 12864 768
WIRE 9872 784 9840 784
WIRE 9952 784 9872 784
WIRE 10080 784 10080 720
WIRE 10080 784 10032 784
WIRE 14672 784 14672 752
WIRE 6128 800 6128 768
WIRE 7792 800 7792 720
WIRE 8000 800 8000 768
WIRE 9008 800 9008 736
WIRE 9312 800 9312 704
WIRE 10144 800 10144 624
WIRE 10304 800 10144 800
WIRE 5104 816 5104 800
WIRE 6048 816 6048 640
WIRE 6096 816 6048 816
WIRE 7504 816 7504 784
WIRE 8320 816 8320 752
WIRE 12864 816 12864 768
WIRE 17232 816 17232 784
WIRE 5040 832 5040 656
WIRE 5072 832 5040 832
WIRE 6192 832 6192 640
WIRE 6192 832 6160 832
WIRE 6272 832 6192 832
WIRE 7264 832 7184 832
WIRE 7424 832 7424 672
WIRE 7424 832 7344 832
WIRE 7472 832 7424 832
WIRE 11392 832 11392 768
WIRE 12480 832 12480 768
WIRE 14800 832 14800 768
WIRE 5184 848 5184 656
WIRE 5184 848 5136 848
WIRE 5280 848 5184 848
WIRE 5888 848 5360 848
WIRE 6016 848 5968 848
WIRE 6096 848 6016 848
WIRE 7600 848 7600 672
WIRE 7600 848 7536 848
WIRE 7728 848 7600 848
WIRE 8096 848 8064 848
WIRE 8160 848 8096 848
WIRE 8256 848 8256 768
WIRE 8256 848 8240 848
WIRE 9920 848 9920 752
WIRE 11280 848 11280 752
WIRE 11904 848 11904 768
WIRE 11904 848 11840 848
WIRE 11984 848 11984 784
WIRE 12944 848 12944 784
WIRE 4224 864 3936 864
WIRE 4368 864 4304 864
WIRE 4592 864 4368 864
WIRE 4640 864 4592 864
WIRE 4864 864 4640 864
WIRE 4992 864 4864 864
WIRE 5072 864 4992 864
WIRE 7472 864 7392 864
WIRE 10144 864 10144 800
WIRE 10304 864 10304 800
WIRE 14560 864 14560 832
WIRE 14448 880 14448 752
WIRE 14528 880 14448 880
WIRE 4592 896 4592 864
WIRE 4864 896 4864 864
WIRE 6016 896 6016 848
WIRE 7888 896 7792 896
WIRE 8000 896 7888 896
WIRE 8096 896 8096 848
WIRE 8256 896 8256 848
WIRE 9872 896 9872 784
WIRE 14672 896 14672 848
WIRE 14672 896 14592 896
WIRE 8720 912 8688 912
WIRE 8896 912 8896 720
WIRE 8896 912 8800 912
WIRE 14528 912 14448 912
WIRE 6128 928 6128 864
WIRE 9312 928 9312 880
WIRE 10400 928 10400 880
WIRE 12352 928 12352 752
WIRE 12416 928 12352 928
WIRE 5104 944 5104 880
WIRE 7504 944 7504 880
WIRE 7392 960 7392 864
WIRE 7888 960 7888 896
WIRE 11536 960 11536 736
WIRE 11584 960 11536 960
WIRE 4480 976 4480 944
WIRE 4752 976 4752 944
WIRE 9760 976 9760 944
WIRE 10144 976 10144 944
WIRE 10304 976 10304 944
WIRE 10368 976 10304 976
WIRE 14448 976 14448 912
WIRE 14560 976 14560 928
WIRE 4368 992 4368 864
WIRE 4448 992 4368 992
WIRE 4640 992 4640 864
WIRE 4720 992 4640 992
WIRE 6016 992 6016 960
WIRE 8256 992 8256 960
WIRE 4592 1008 4592 960
WIRE 4592 1008 4512 1008
WIRE 4864 1008 4864 960
WIRE 4864 1008 4784 1008
WIRE 4448 1024 4304 1024
WIRE 4720 1024 4640 1024
WIRE 4992 1024 4992 864
WIRE 5232 1024 4992 1024
WIRE 9872 1024 9872 976
WIRE 9872 1024 9792 1024
WIRE 10304 1024 10304 976
WIRE 9872 1056 9872 1024
WIRE 10400 1056 10400 1024
WIRE 4480 1088 4480 1040
WIRE 4752 1088 4752 1040
WIRE 7888 1104 7888 1040
WIRE 9760 1120 9760 1072
WIRE 10304 1120 10304 1088
WIRE 9872 1152 9872 1120
WIRE 4640 1200 4640 1024
WIRE 4640 1200 4496 1200
FLAG 2304 -2608 0
FLAG 2480 -2608 0
FLAG -1824 16 0
FLAG 2304 -2768 +15V
FLAG 2480 -2768 -15V
FLAG -1568 112 +15V
FLAG -1568 272 -15V
FLAG -3280 432 0
FLAG 640 -2272 0
FLAG 672 -2448 1V
IOPIN 672 -2448 Out
FLAG -896 224 0
FLAG -336 224 0
FLAG -176 0 full_rect
IOPIN -176 0 Out
FLAG -848 112 +15V
FLAG -848 272 -15V
FLAG -288 112 +15V
FLAG -288 272 -15V
FLAG 880 208 full_rect_log
IOPIN 880 208 Out
FLAG 288 256 0
FLAG 336 144 +15V
FLAG 336 304 -15V
FLAG 640 -2576 0
FLAG 672 -2752 1Vramp
IOPIN 672 -2752 Out
FLAG -1296 96 +15V
FLAG -1296 256 -15V
FLAG 7504 -2128 0
FLAG 7552 -2240 +15V
FLAG 7552 -2080 -15V
FLAG 6752 -2048 0
FLAG 6752 -2400 +15V
FLAG 7952 464 0
FLAG 7888 1104 0
FLAG 8096 896 0
FLAG 8560 656 tanh_out
IOPIN 8560 656 Out
FLAG 2144 560 0
FLAG 2256 144 +15V
FLAG 2256 304 -15V
FLAG 2480 208 full_rect_log_min_thr
IOPIN 2480 208 Out
FLAG 8320 656 +15V
FLAG 8320 816 -15V
FLAG 2000 336 thr_log
IOPIN 2000 336 In
FLAG 7200 -2256 +15V
FLAG 7200 -2096 -15V
FLAG 12832 -256 0
FLAG 13392 -256 peak_AR
IOPIN 13392 -256 Out
FLAG 13872 -496 gain_before_ratio
IOPIN 13872 -496 Out
FLAG 13680 -464 +15V
FLAG 13680 -304 -15V
FLAG 7792 -2176 thr_log
IOPIN 7792 -2176 Out
FLAG 14384 -384 gain_before_ratio_inv
IOPIN 14384 -384 Out
FLAG 1424 -2544 0
FLAG 1568 -2752 1Vmod
IOPIN 1568 -2752 Out
FLAG 16768 400 0
FLAG 16192 -80 gain_before_ratio_inv
IOPIN 16192 -80 In
FLAG 16928 240 0
FLAG 17264 368 gain_after_ratio
IOPIN 17264 368 Out
FLAG 17232 816 0
FLAG 16720 704 0
FLAG 16496 96 +5V
FLAG 16720 96 -5V
FLAG 2304 -2304 0
FLAG 2464 -2304 0
FLAG 2304 -2464 +5V
FLAG 2464 -2464 -5V
FLAG 14208 -432 +15V
FLAG 14208 -288 -15V
FLAG 17680 144 gain_before_ratio
IOPIN 17680 144 In
FLAG 14128 -336 0
FLAG 18032 64 +15V
FLAG 18032 224 -15V
FLAG 17760 -64 0
FLAG 20016 32 signal_in
IOPIN 20016 32 In
FLAG 21312 128 final
IOPIN 21312 128 Out
FLAG 21280 304 0
FLAG 20816 272 0
FLAG 20688 64 0
FLAG 20224 96 gain_final
IOPIN 20224 96 In
FLAG 18736 144 gain_final
IOPIN 18736 144 Out
FLAG -3216 208 signal_in
IOPIN -3216 208 Out
FLAG 11584 960 tanh_out_gain_inv
IOPIN 11584 960 Out
FLAG 7504 784 +15V
FLAG 7504 944 -15V
FLAG 7392 960 0
FLAG 11984 704 +15V
FLAG 11984 848 -15V
FLAG 12416 928 tanh_out_clamp
IOPIN 12416 928 Out
FLAG 12032 -2400 vratio_buf
IOPIN 12032 -2400 Out
FLAG 13120 752 tanh_out_clamp2
IOPIN 13120 752 Out
FLAG 12400 -2352 +15V
FLAG 12400 -2192 -15V
FLAG 12288 -2176 0
FLAG 12480 672 +15V
FLAG 12480 832 -15V
FLAG 16208 224 tanh_out_clamp2_clip_buf
IOPIN 16208 224 In
FLAG 7184 832 peak_AR_buf_tanh
IOPIN 7184 832 In
FLAG 640 -1984 0
FLAG 768 -2176 gain_reduction
IOPIN 768 -2176 Out
FLAG 1424 -1936 0
FLAG 1632 -2128 final_norm
IOPIN 1632 -2128 Out
FLAG 11360 -2160 0
FLAG 11360 -2512 -15V
FLAG 6960 -2240 lin_thr
IOPIN 6960 -2240 Out
FLAG 11824 -2368 +15V
FLAG 11824 -2208 -15V
FLAG 11568 -2368 vratio
IOPIN 11568 -2368 Out
FLAG 12688 -2288 vratio_buf_inv
IOPIN 12688 -2288 Out
FLAG 16240 352 0
FLAG 17072 672 0
FLAG 624 -1664 0
FLAG 656 -1840 1Vsquare
IOPIN 656 -1840 Out
FLAG 11840 -304 +15V
FLAG 11840 -160 -15V
FLAG 6272 832 peak_AR_buf_tanh
IOPIN 6272 832 Out
FLAG 13600 -352 0
FLAG 11920 -528 0
FLAG 4880 656 0
FLAG 14064 752 tanh_out_clamp2
IOPIN 14064 752 In
FLAG 14560 832 +15V
FLAG 14560 976 -15V
FLAG 14928 736 tanh_out_clamp2_clip_buf
IOPIN 14928 736 Out
FLAG 14800 672 +15V
FLAG 14800 832 -15V
FLAG 11392 672 +15V
FLAG 11392 832 -15V
FLAG 11280 848 0
FLAG 12944 688 +15V
FLAG 12944 848 -15V
FLAG 18576 96 +15V
FLAG 18576 240 -15V
FLAG 18496 192 0
FLAG 12160 -448 +15V
FLAG 12160 -304 -15V
FLAG 5104 800 +15V
FLAG 5104 944 -15V
FLAG 7088 -2016 0
FLAG 8256 992 0
FLAG 11664 -2160 0
FLAG -1696 336 0
FLAG 16240 144 0
FLAG 16608 496 +5V
FLAG 16608 672 -5V
FLAG 17376 752 +5V
FLAG 17376 576 -5V
FLAG -1824 112 signal_in_ac
IOPIN -1824 112 Out
FLAG 9920 848 0
FLAG 10080 688 0
FLAG 10304 720 tanh_norm
IOPIN 10304 720 Out
FLAG 10304 1120 0
FLAG 9872 1152 0
FLAG 9648 544 +5V
FLAG 9872 544 -5V
FLAG 9520 640 0
FLAG 10144 976 0
FLAG 9312 928 0
FLAG 9760 944 +5V
FLAG 9760 1120 -5V
FLAG 10400 1056 +5V
FLAG 10400 880 -5V
FLAG 9488 496 vratio_buf_sym
IOPIN 9488 496 In
FLAG 11024 720 tanh_norm
IOPIN 11024 720 In
FLAG 2480 -2032 0
FLAG 2480 -2192 -0.5V
FLAG 12400 -1872 +15V
FLAG 12400 -1712 -15V
FLAG 12288 -1696 -0.5V
FLAG 12560 -1808 vratio_buf_sym
IOPIN 12560 -1808 Out
FLAG 12864 816 0
FLAG 14448 976 0
FLAG 9008 640 +15V
FLAG 9008 800 -15V
FLAG 8688 912 -0.5V
IOPIN 8688 912 In
FLAG 8736 512 0
FLAG 9248 624 tanh_out_shift
IOPIN 9248 624 Out
FLAG 5232 1024 full_rect_log_min_thr_clip2
IOPIN 5232 1024 Out
FLAG 4752 944 +15V
FLAG 4752 1088 -15V
FLAG 4480 944 +15V
FLAG 4480 1088 -15V
FLAG -32 -1664 0
FLAG 0 -1840 1Vpulse
IOPIN 0 -1840 Out
FLAG 13264 -480 +15V
FLAG 13264 -320 -15V
FLAG 11856 -720 full_rect_log_min_thr_clip
IOPIN 11856 -720 Out
FLAG 11728 -192 0
FLAG 20576 80 +15V
FLAG 20464 -160 -15V
FLAG 9648 -2288 0
FLAG 9648 -2544 -0.5V
FLAG 10176 -2464 +15V
FLAG 10176 -2304 -15V
FLAG 9936 -2144 vhalf_kw
IOPIN 9936 -2144 Out
FLAG 9872 -2288 0
FLAG 10096 -2352 0
FLAG 10352 -2400 vhalf_kw_inv
IOPIN 10352 -2400 Out
FLAG 4496 1200 vhalf_kw
IOPIN 4496 1200 In
FLAG 4304 1024 vhalf_kw_inv
IOPIN 4304 1024 In
FLAG 4608 -448 +15V
FLAG 4608 -288 -15V
FLAG 4336 -512 0
FLAG 4096 -272 vhalf_kw_inv
IOPIN 4096 -272 In
FLAG 9984 -192 full_rect_log_min_thr_min_half_kw
IOPIN 9984 -192 Out
FLAG 20976 48 +15V
FLAG 20976 240 -15V
FLAG 4304 -368 full_rect_log_min_thr
IOPIN 4304 -368 In
FLAG 3936 864 full_rect_log_min_thr
IOPIN 3936 864 In
FLAG 12704 -256 0
FLAG 12912 -480 +15V
FLAG 12912 -320 -15V
FLAG 13152 -256 0
FLAG 6128 768 +15V
FLAG 6128 928 -15V
FLAG 6016 992 0
FLAG 2304 -2032 0
FLAG 2304 -2192 4dBu
FLAG 10176 -2096 +15V
FLAG 10176 -1936 -15V
FLAG 10288 -2032 vhalf_kw_buf
IOPIN 10288 -2032 Out
FLAG 1888 192 full_rect_log
IOPIN 1888 192 In
FLAG 11840 848 vratio_buf_inv
IOPIN 11840 848 In
FLAG -2128 192 signal_in
IOPIN -2128 192 In
FLAG 20336 80 0
SYMBOL voltage 2304 -2752 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value +15V
SYMBOL voltage 2480 -2752 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value -15V
SYMBOL res -1520 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 47.6K
SYMBOL res -1664 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10K
SYMBOL TL072 -1568 112 R0
SYMATTR InstName U1
SYMBOL bv -3280 272 R0
WINDOW 3 42 45 Left 2
SYMATTR Value V=1.414*0.775*(10**({dBu_level}/20))*V(1V)
SYMATTR InstName B1
SYMBOL voltage 640 -2400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value SINE(0 1 {freq})
SYMBOL res -1008 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 6.8K
SYMBOL res -800 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 6.8K
SYMBOL diode -832 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode -608 160 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res -800 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 6.8K
SYMBOL res -432 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 3.4K
SYMBOL res -224 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 6.8K
SYMBOL res 64 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 4.2k
SYMBOL TL072 336 144 R0
SYMATTR InstName U4
SYMBOL voltage 640 -2704 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(-1 1 0 {1/(2*freq)} {1/(2*freq)} 0 {1/freq})
SYMBOL TL072 -1296 96 R0
SYMATTR InstName U5
SYMBOL OpAmps\\LTC6244 -848 176 R0
SYMATTR InstName U2
SYMBOL OpAmps\\LTC6244 -288 176 R0
SYMATTR InstName U3
SYMBOL res 7408 -2208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 4.2k
SYMBOL TL072 7552 -2240 R0
SYMATTR InstName U6
SYMBOL pot 6752 -2176 R180
SYMATTR InstName U8
SYMATTR Value2 T={threshold}
SYMATTR Prefix X
SYMATTR SpiceModel pot
SYMBOL res 6736 -2368 R0
SYMATTR InstName R10
SYMATTR Value 5k
SYMBOL res 7776 608 R0
SYMATTR InstName R11
SYMATTR Value 2K
SYMBOL res 7984 608 R0
SYMATTR InstName R12
SYMATTR Value 2K
SYMBOL npn 7728 800 R0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL npn 8064 800 M0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL voltage 7952 352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 5V
SYMBOL current 7888 960 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value 255.9µ
SYMBOL res 8208 752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 100K
SYMBOL res 8256 832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 100K
SYMBOL res 8128 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 100K
SYMBOL res 8368 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 100K
SYMBOL res 2128 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 10K
SYMBOL res 2128 384 R0
SYMATTR InstName R18
SYMATTR Value 10K
SYMBOL res 2128 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 10K
SYMBOL res 2320 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 10K
SYMBOL TL072 2256 144 R0
SYMATTR InstName U10
SYMBOL TL072 8320 656 R0
SYMATTR InstName U9
SYMBOL cap 8352 432 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 0.2n
SYMATTR SpiceLine V=25 Rser=0.2
SYMBOL TL072 7200 -2256 R0
SYMATTR InstName U13
SYMBOL cap 2304 -128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 0.3n
SYMATTR SpiceLine V=50 Irms=0 Rser=0.1 Lser=0
SYMBOL cap 12816 -352 R0
SYMATTR InstName C5
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=10 Irms=0 Rser=0.003 Lser=0
SYMBOL TL072 13680 -464 R0
SYMATTR InstName U15
SYMBOL bv 1424 -2704 R0
SYMATTR InstName B2
SYMATTR Value V=V(1V)*sin({modfreq}*2*pi*time)
SYMBOL res 16464 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R41
SYMATTR Value 1k
SYMBOL res 16896 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R42
SYMATTR Value 1k
SYMBOL res 16816 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R43
SYMATTR Value 20
SYMBOL VCA824 16608 256 R0
SYMATTR InstName U23
SYMATTR Prefix X
SYMATTR SpiceModel VCA824
SYMATTR Value2 VCA824
SYMBOL res 17248 544 M0
SYMATTR InstName R46
SYMATTR Value 1k
SYMBOL cap 17248 720 M0
SYMATTR InstName C1
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=50 Irms=0 Rser=0.09 Lser=0
SYMBOL res 16704 432 R0
SYMATTR InstName R47
SYMATTR Value 4k
SYMBOL cap 16704 608 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL voltage 2304 -2432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 5V
SYMBOL voltage 2464 -2432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V12
SYMATTR Value -5V
SYMBOL TL072 14208 -448 R0
SYMATTR InstName U24
SYMBOL res 14256 -560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R50
SYMATTR Value 10k
SYMBOL res 14064 -416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R51
SYMATTR Value 10k
SYMBOL res 17904 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R52
SYMATTR Value 100k
SYMBOL res 17904 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R53
SYMATTR Value 100k
SYMBOL res 18096 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R54
SYMATTR Value 100k
SYMBOL TL072 18032 64 R0
SYMATTR InstName U25
SYMBOL res 17536 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R55
SYMATTR Value 100k
SYMBOL res 21088 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R58
SYMATTR Value 20K
SYMBOL cap 21056 -176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 22p
SYMATTR SpiceLine V=50 Irms=0 Rser=0.1601 Lser=520p mfg="Würth Elektronik" pn="885012008039 WCAP-CSGP 1206" type="NP0"
SYMBOL res 20320 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R59
SYMATTR Value 20K
SYMBOL res 21264 160 R0
SYMATTR InstName R60
SYMATTR Value 10Meg
SYMBOL TL072 20976 64 R0
SYMATTR InstName U27
SYMBOL voltage 20816 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V17
SYMATTR Value 0
SYMBOL THAT2180A 20448 64 R0
SYMATTR InstName U28
SYMATTR Prefix X
SYMATTR Value2 THAT2180A
SYMATTR SpiceModel THAT2180A
SYMBOL res 20496 -144 R0
SYMATTR InstName R61
SYMATTR Value 5.1K
SYMBOL TL072 7504 784 R0
SYMATTR InstName U22
SYMBOL res 7568 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R65
SYMATTR Value {tanh_gain_in}
SYMBOL res 7360 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R66
SYMATTR Value 10k
SYMBOL TL072 11984 688 R0
SYMATTR InstName U7
SYMBOL res 11872 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 10k
SYMBOL cap 11664 720 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=0.09
SYMBOL diode 12160 736 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D14
SYMATTR Value 1N4148
SYMBOL TL072 12400 -2352 R0
SYMATTR InstName U29
SYMBOL res 12464 -2480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R68
SYMATTR Value 10k
SYMBOL res 12256 -2320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R69
SYMATTR Value 10k
SYMBOL TL072 12480 672 R0
SYMATTR InstName U30
SYMBOL bv 640 -2112 R0
SYMATTR InstName B3
SYMATTR Value V=20*log10(abs(V(signal_in))) -20*log10(abs(V(final)))
SYMBOL bv 1424 -2096 R0
SYMATTR InstName B4
SYMATTR Value V=V(final)/(1.414*0.775*(10**({dBu_level}/20)))
SYMBOL pot 11360 -2288 R180
SYMATTR InstName U11
SYMATTR Value2 T= 1/{ratio_ctrl} stiff=10000
SYMATTR Value R=1k
SYMATTR SpiceModel exppot
SYMATTR Prefix X
SYMBOL res 11344 -2480 R0
SYMATTR InstName R62
SYMATTR Value 14k
SYMBOL TL072 11824 -2368 R0
SYMATTR InstName U31
SYMBOL voltage 16240 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value 0V
SYMBOL res 17056 544 R0
SYMATTR InstName R63
SYMATTR Value 100k
SYMBOL voltage 624 -1792 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V10
SYMATTR Value PULSE(-1 1 0 1e-6 1e-6 {duty/freq} {1/freq})
SYMBOL diode 11968 -288 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D12
SYMATTR Value 1N4148
SYMBOL Opamps\\LTC6244 11840 -240 R0
SYMATTR InstName U32
SYMBOL res 11648 -400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 1k
SYMBOL res 13728 -608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R72
SYMATTR Value 2k
SYMBOL res 13520 -432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R73
SYMATTR Value 10k
SYMBOL res 12208 -608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R74
SYMATTR Value 30.808k
SYMBOL res 12064 -608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R75
SYMATTR Value 1k
SYMBOL res 5168 640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R76
SYMATTR Value 30.808k
SYMBOL res 5024 640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R77
SYMATTR Value 1k
SYMBOL diode 14656 784 R0
SYMATTR InstName D19
SYMATTR Value 1N4148
SYMBOL Opamps\\LTC6244 14560 896 R0
SYMATTR InstName U36
SYMBOL res 14288 736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R78
SYMATTR Value 1k
SYMBOL TL072 14800 672 R0
SYMATTR InstName U38
SYMBOL TL072 11392 672 R0
SYMATTR InstName U12
SYMBOL res 11456 544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R56
SYMATTR Value 10k
SYMBOL res 11216 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R57
SYMATTR Value 10k
SYMBOL TL072 12944 688 R0
SYMATTR InstName U18
SYMBOL res 13008 560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 10k
SYMBOL res 18624 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 35k
SYMBOL res 18480 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R40
SYMATTR Value 10k
SYMBOL OpAmps\\LT1217 18576 80 R0
SYMATTR InstName U37
SYMBOL res 12448 -416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R67
SYMATTR Value 250
SYMBOL OpAmps\\LT1217 12160 -464 R0
SYMATTR InstName U14
SYMBOL OpAmps\\LT1217 5104 784 R0
SYMATTR InstName U33
SYMBOL voltage 2304 -2176 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1.736
SYMATTR InstName V7
SYMATTR Value ""
SYMBOL cap 2288 464 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C11
SYMATTR Value 0.3n
SYMATTR SpiceLine V=50 Irms=0 Rser=0.1 Lser=0
SYMBOL cap 7072 -2128 R0
SYMATTR InstName C12
SYMATTR Value 1µ
SYMBOL cap 8240 896 R0
SYMATTR InstName C14
SYMATTR Value 0.2n
SYMATTR SpiceLine V=25 Rser=0.2
SYMBOL cap 11648 -2256 R0
SYMATTR InstName C15
SYMATTR Value 1µ
SYMBOL cap 20160 16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C16
SYMATTR Value 10µ
SYMBOL cap -1984 176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C17
SYMATTR Value 1µ
SYMBOL res -1712 208 R0
SYMATTR InstName R80
SYMATTR Value 200k
SYMBOL diode 7520 -2336 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL diode 336 48 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D8
SYMATTR Value 1N4148
SYMBOL res 16224 0 R0
SYMATTR InstName R81
SYMATTR Value 100k
SYMBOL pot 16608 576 M0
SYMATTR InstName U26
SYMATTR Value2 T=.4917
SYMATTR Prefix X
SYMATTR SpiceModel pot
SYMBOL pot 17376 672 M180
SYMATTR InstName U39
SYMATTR Value R=1meg
SYMATTR Value2 T=.8029
SYMATTR Prefix X
SYMATTR SpiceModel pot
SYMBOL res 9616 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R48
SYMATTR Value 1k
SYMBOL res 10048 768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R49
SYMATTR Value 1k
SYMBOL res 9968 672 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R82
SYMATTR Value 20
SYMBOL VCA824 9760 704 R0
SYMATTR InstName U41
SYMATTR Prefix X
SYMATTR Value2 VCA824
SYMATTR SpiceModel VCA824
SYMBOL res 10320 848 M0
SYMATTR InstName R83
SYMATTR Value 1k
SYMBOL cap 10320 1024 M0
SYMATTR InstName C18
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=50 Irms=0 Rser=0.09 Lser=0
SYMBOL res 9856 880 R0
SYMATTR InstName R84
SYMATTR Value 4k
SYMBOL cap 9856 1056 R0
SYMATTR InstName C19
SYMATTR Value 0.1µ
SYMBOL voltage 9520 528 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V19
SYMATTR Value 0V
SYMBOL res 10128 848 R0
SYMATTR InstName R85
SYMATTR Value 100k
SYMBOL res 9296 784 R0
SYMATTR InstName R86
SYMATTR Value 100k
SYMBOL pot 9760 1024 M0
SYMATTR InstName U42
SYMATTR Value2 T=.4917
SYMATTR Prefix X
SYMATTR SpiceModel pot
SYMBOL pot 10400 976 M180
SYMATTR InstName U43
SYMATTR Value R=1meg
SYMATTR Value2 T=.8033
SYMATTR Prefix X
SYMATTR SpiceModel pot
SYMBOL res 12752 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R87
SYMATTR Value 10k
SYMBOL voltage 2480 -2160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V20
SYMATTR Value -0.5V
SYMBOL TL072 12400 -1872 R0
SYMATTR InstName U44
SYMBOL res 12464 -2000 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R88
SYMATTR Value 10k
SYMBOL res 12256 -1840 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R89
SYMATTR Value 10k
SYMBOL res 8880 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 10K
SYMBOL res 8864 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 10K
SYMBOL res 9072 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R44
SYMATTR Value 10K
SYMBOL TL072 9008 640 R0
SYMATTR InstName U35
SYMBOL res 8816 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R45
SYMATTR Value 10K
SYMBOL diode 4880 960 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -49 5 Left 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL Opamps\\LTC6244 4752 1008 R0
SYMATTR InstName U40
SYMBOL diode 4576 896 R0
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL Opamps\\LTC6244 4480 1008 R0
SYMATTR InstName U45
SYMBOL res 4320 848 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R71
SYMATTR Value 1k
SYMBOL voltage -32 -1792 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V11
SYMATTR Value PULSE(0 1 20ms 1e-6 1e-6 0.1 0 1)
SYMBOL TL072 13264 -480 R0
SYMATTR InstName U16
SYMBOL schottky 12528 -384 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D10
SYMATTR Value RB500SM-30
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL pot 9648 -2416 R180
SYMATTR InstName U17
SYMATTR Value2 T={knee}
SYMATTR Prefix X
SYMATTR SpiceModel pot
SYMBOL TL072 10176 -2464 R0
SYMATTR InstName U19
SYMBOL cap 9856 -2384 R0
SYMATTR InstName C9
SYMATTR Value 1µ
SYMBOL res 10224 -2608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 10k
SYMBOL res 10064 -2432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R31
SYMATTR Value 10k
SYMBOL res 4480 -592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R32
SYMATTR Value 10K
SYMBOL res 4480 -384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R33
SYMATTR Value 10K
SYMBOL res 4672 -592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R36
SYMATTR Value 10k
SYMBOL TL072 4608 -448 R0
SYMATTR InstName U21
SYMBOL res 4336 -288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R37
SYMATTR Value 10K
SYMBOL res 12688 -384 R0
SYMATTR InstName R27
SYMATTR Value {release}
SYMBOL TL072 12912 -480 R0
SYMATTR InstName U20
SYMBOL res 13120 -416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value {attack}
SYMBOL cap 13136 -352 R0
SYMATTR InstName C10
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=10 Irms=0 Rser=0.003 Lser=0
SYMBOL TL072 6128 768 R0
SYMATTR InstName U46
SYMBOL res 5984 832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R29
SYMATTR Value {attack}
SYMBOL cap 6000 896 R0
SYMATTR InstName C13
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=10 Irms=0 Rser=0.003 Lser=0
SYMBOL TL072 10176 -2096 R0
SYMATTR InstName U47
SYMBOL res 5376 832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R34
SYMATTR Value 250
SYMBOL star\ sign 14736 -384 R0
SYMATTR InstName X1
SYMATTR Prefix X
SYMBOL star\ sign 1664 192 R0
SYMATTR InstName X3
SYMATTR Prefix X
SYMBOL star\ sign 1088 208 R0
SYMATTR InstName X4
SYMATTR Prefix X
SYMBOL star\ sign 2800 192 R0
SYMATTR InstName X5
SYMATTR Prefix X
SYMBOL star\ sign 3968 -368 R0
SYMATTR InstName X6
SYMATTR Prefix X
SYMBOL star\ sign 3600 864 R0
SYMATTR InstName X7
SYMATTR Prefix X
SYMBOL star\ sign -2304 192 R0
SYMATTR InstName X8
SYMATTR Prefix X
SYMBOL star\ sign 13408 752 R0
SYMATTR InstName X9
SYMATTR Prefix X
SYMBOL star\ sign 10512 720 R0
SYMATTR InstName X10
SYMATTR Prefix X
SYMBOL star\ sign 10816 720 R0
SYMATTR InstName X11
SYMATTR Prefix X
SYMBOL star\ sign 6560 832 R0
SYMATTR InstName X12
SYMATTR Prefix X
SYMBOL star\ sign 6896 832 R0
SYMATTR InstName X13
SYMATTR Prefix X
SYMBOL star\ sign 10528 -192 R0
SYMATTR InstName X14
SYMATTR Prefix X
SYMBOL star\ sign -3040 208 R0
SYMATTR InstName X15
SYMATTR Prefix X
SYMBOL star\ sign 13792 752 R0
SYMATTR InstName X16
SYMATTR Prefix X
SYMBOL star\ sign 15296 736 R0
SYMATTR InstName X17
SYMATTR Prefix X
SYMBOL star\ sign 15824 -80 R0
SYMATTR InstName X18
SYMATTR Prefix X
SYMBOL star\ sign 18928 144 R0
SYMATTR InstName X19
SYMATTR Prefix X
SYMBOL star\ sign 15840 224 R0
SYMATTR InstName X20
SYMATTR Prefix X
SYMBOL star\ sign 19776 32 R0
SYMATTR InstName X21
SYMATTR Prefix X
SYMBOL star\ sign 20016 112 R0
SYMATTR InstName X22
SYMATTR Prefix X
SYMBOL star\ sign 21456 128 R0
SYMATTR InstName X23
SYMATTR Prefix X
TEXT -2472 40 Left 2 ;Conversion from 1V max to dBu_level.\nCircuit nominal is 4dBu
TEXT 640 -2488 Left 2 ;1V reference sine for tests
TEXT -808 -352 Left 5 ;PRECISION FULL WAVE RECTIFIER
TEXT 112 -40 Left 2 ;linear to log signal converter
TEXT -2576 0 Left 2 ;gain 5.76 so that we get 10V at 4dBU for rectifier stage
TEXT -1632 -120 Left 2 ;op amp buffer to make output impedance as low as possible \nas the following rectifier stage is sensitive to it
TEXT -104 416 Left 2 ;log stage transfer function Vout=   -Vt*ln(Vin/(Is*R))\nVt = diode thermal voltage, Is = diode saturation current\nthermal voltage depends on absolute temperature, which would go up with room temperature\nand high signal levels (more current flowing in the diodes = more heat)\nthermal management may be advised, ex: both diodes for signal and threshold could be termally\ncoupled.\nAlso advised to match both diodes
TEXT 7216 -2488 Left 2 ;linear to log threshold converter
TEXT 6232 -2368 Left 5 ;THRESHOLD POT
TEXT 2352 280 Left 2 ;out = full_rect_log - thr_log
TEXT 6232 -2144 Left 2 ;thr_log more negative = higher threshold\nwiper closer to 1 = lower threshold\nwiper closer to 0 = higher threshold
TEXT 5592 496 Left 5 ;LOG DOMAIN PEAK DETECTOR +  EXP A/R
TEXT 12536 -456 Left 2 ;release potentiometer
TEXT 12984 -480 Left 2 ;attack potentiometer
TEXT 16280 584 Left 2 ;input offset compensation
TEXT 17424 672 Left 2 ;output offset compensation
TEXT 2328 -2880 Left 4 ;RAILS
TEXT 1024 -2872 Left 2 !.param modfreq = {10}
TEXT 1024 -2840 Left 2 !.param freq = {20}
TEXT 12208 328 Left 2 ;What we have is a smooth transition between unity gain setpoint (0V), ratio = 1\nand set ratio voltage.
TEXT 1424 -2808 Left 2 ;1V amplitude modulated sine for tests
TEXT 648 -2800 Left 2 ;1V triangle
TEXT 656 -2224 Left 2 ;gain reduction quick&dirty (zoom to get rid of singularities)
TEXT 1024 -3064 Left 2 !.tran 0 0.2 1ms {1/sample_rate} uic
TEXT 1024 -2936 Left 2 !.param dBu_level = {4}
TEXT 1024 -2904 Left 2 !.param sample_rate = 44.1k
TEXT 1024 -2968 Left 2 !.options cshunt=1e-15
TEXT 568 -3056 Left 5 ;TEST BENCH
TEXT 1472 -2160 Left 2 ;compressor output
TEXT 8488 160 Left 5 ;KNEE MANAGEMENT
TEXT 3712 536 Left 5 ;SIGNAL(dB) - THRESHOLD(dB) STAGE
TEXT 7768 328 Left 2 ;tanh() cell using a BJT differential pair
TEXT 6864 1080 Left 2 ;tanh() saturation... low R65 looks more like sine. (very soft knee)\n very high R65 introduces high distortion at knee. (folding)
TEXT 11424 -2552 Left 5 ;RATIO POT
TEXT 11576 472 Left 2 ;clamp tanh_out_gain_inv output positive excursions to -vratio level (positive value).\nshould not happen unless tanh() current sink is above 247µA.\nthen,  tanh_out_gain_inv may go above -vratio.
TEXT 18048 432 Left 2 ;gain = gain_before_ratio*( 1 - 1/ratio)\ngain = gain_before_ratio + gain_before_ratio_inv/ratio  (gain_after_ratio_inv is negative)\ngain = gain_before_ratio + gain_after_ratio (gain_after_ratio is negative)
TEXT 20008 -320 Left 5 ;AUDIO PATH VCA STAGE - FEEDFORWARD
TEXT 1024 -3096 Left 2 !;ac dec 10 20 100000
TEXT 632 -1888 Left 2 ;1V square
TEXT 1024 -2808 Left 2 !.param duty = {0.5}
TEXT 4032 -664 Left 2 ;Here 0V level is threshold +kw/2. The point at which the compressor should start working\nwe clip signal under 0V
TEXT 6256 -2232 Left 2 ;lin_v = 15*(1-t)*10k/(10k +5k)
TEXT 7728 -2368 Left 2 ;the incentive to use a lin to log diode converter instead of a log pot is :\nuse the same transfer function. (make calibration easier)\nhave the thermal effect partially cancel each other (since both diode networks heat more or less\nthe same way, but that is assuming current is the same which is not because the threshold\ndiode  is subject to DC)
TEXT 16552 -656 Left 2 ;The peak detector A/R stage contribution is made negligible by setting the fastest A/R possible,\nR=100 ohms for both\nwe ommit input gain = 5.76 because both vin and vthr use the same gain so it cancels out.\ntechnically we could ommit Is*R because they also cancel out...\n \nn*-Vt*ln(Vin/(Is*R))\n25.4mV*ln(Vin/(2nA*4.2k))\ndeltaVln = 25.4mV*ln(Vin/(2nA*4.2k)) - 25.4mV*ln(Vthr/(2nA*4.2k)) \ndeltaVln = 25.4mV*(ln(Vin/(2nA*4.2k)) - ln(Vthr/(2nA*4.2k)))\ndeltaVln = 25.4mV*(ln(Vin) - ln(Vthr)  -ln(2nA*4.2k) + ln(2nA*4.2k))\n \nnow convert ln2 to log10, hence the factor 2.303 and then to dBV...\n \ndeltaVllog = (25.4mV*2.303)*(log(Vin) - log(Vthr))\ndeltaVllog = (25.4mV*2.303)*(log(Vin) - log(Vthr))\ndbV = 20*log(V)\nwe want k*25.4mV*2.303 = 20\nk =20/(2.303-*25.4mV)\nk = 341.9\nand we also have THAT2180 1 dbV gain = 0.0061V\nthus final normalization gain = 341.9*0.0061 = 2.08559\nk = 2.08559
TEXT 19816 -16 Left 2 ;use good audio cap here
TEXT 20120 392 Left 2 ;gain_final OUTPUT impedance should be as low as possible to drive THAT2180 properly\nZ_out << 50 Ohms.\ncompare that to TL072 125ohms open loop resistance.\nThat's why we use a high current low output impedance LT1217 Op Amp
TEXT 11968 -224 Left 2 ;gain_in 1 + R74/R75 (here 30.808/1 +1 = 31.808) so that we renormalize to 10V max
TEXT 1848 -208 Left 2 ;max log_min_thr (4dbU triangle signal, threshold -INF dB) =  0.31425V
TEXT 13584 -672 Left 2 ;we're back to 0.314V max
TEXT 12184 -312 Left 2 ;R67 current limiting resistor to protect U14
TEXT 5120 912 Left 2 ;R79 current limiting resistor to protect U33
TEXT -664 528 Left 2 ;THEORY = 25.4mV*ln(Vin*5.76/(2nA*4.2k))\n 25.4mV*ln(10/(2nA*4.2k)) = 0.355325
TEXT 17008 48 Left 2 ;gain_before ratio has to stay under 1.6V !!! as per VCA824 datasheet
TEXT 1024 -3032 Left 2 !;.noise V(final) V7 dec 10 1 20000
TEXT 1944 128 Left 2 ;0.1% or less
TEXT 2168 -48 Left 2 ;0.1% or less
TEXT 1896 384 Left 2 ;0.1% or less
TEXT 1944 472 Left 2 ;0.1% or less
TEXT 80 -80 Left 2 ;D8 and D4 must be matched and coupled thermally
TEXT 9336 888 Left 2 ;input offset compensation
TEXT 9408 1032 Left 2 ;output offset compensation
TEXT 6784 792 Left 2 ;input signal amplitude could be as high as 10V
TEXT 12096 -2096 Left 2 ;symmetry point is 0.5V this is an inverting op amp with 0.5V reference symmetry.\nused to properly condition the gain signal of the VCA824 (U41) that performs tanh() normalization
TEXT 12848 512 Left 2 ;inverting op amp
TEXT 9536 384 Left 2 ;tanh() normalizer ( so that : vratio_buf < tanh_norm < 0V )\nthis assumes that the previous tanh() cell is well behaved and  -0.5V < tanh_out < 0.5V\nif not, the following clamping stage will take care of unwanted excursions.
TEXT 13752 552 Left 2 ;a bit of extra precaution so that VG fed to the U23 VCA824 never goes above 0V.\ntanh() normalization and clamping action is not perfect, as well as U41 VCA824 always \nhas some offset despite calibration, so we clip above 0V here.\nclamping is also required if tanh() current source is also set above 247µA
TEXT 7384 608 Left 2 ;tweak 200 < R65 < 1.5k
TEXT 4208 720 Left 2 !.param bw = {0.05}
TEXT 4056 816 Left 2 ;here we clip signal under -kw/2 and above kw/2 0V is threshold
TEXT 3920 696 Left 2 ;bw is the threshold bandwidth for soft/hard knee application
TEXT 6872 1176 Left 2 ;setting I1 above 247µA gives a tanh() output that is no more bound from [-0.5V to 0.5V]\nNormalization and shifting to 0.5 is no more sufficient to set final ratio signal inside [vratio, 0V] range. \nhowever, clamping at -vratio and clipping at 0V before the U23 VCA824 make the\ncircuit compensated once again should that happen.
TEXT -24 -1888 Left 2 ;1V square pulse
TEXT -72 -1912 Left 2 ;for testing A/R constants
TEXT 12264 -256 Left 2 ;account for diode drop in final gain.
TEXT 12352 -184 Left 2 ;attack range 100 - 10k\nrelease range 10k - 10Meg
TEXT 11448 -2496 Left 4 ;RATIO = 1/T\nvratio =  T - 1
TEXT 17552 -288 Left 4 ;GAIN COMPUTER (U23 with variable ratio for knee management and U25 for final gain)
TEXT 16536 -792 Left 4 ;FINAL GAIN NORMALIZATION
TEXT 20928 -216 Left 2 ;CURRENT TO VOLTAGE
TEXT 20152 -56 Left 2 ;CURRENT LIMITING
TEXT 9096 -2528 Left 5 ;KNEE WIDTH POT
TEXT 9376 -2432 Left 4 ;KW = 1 - T
TEXT 4160 -168 Left 2 ;We offset down the selected threshold by half knee width.\nThis to ensure smooth knee application, so that the gain computer and knee width start\nworking at the same levels
TEXT 5616 568 Left 2 ;decoupling A/R with diodes is one way to do it, but it introduces a diode voltage drop.\nIt is mainly experimental. The more standard way is to use separate attack/release stages\nseparated by a buffer
TEXT 19560 -216 Left 2 ;the sidechain and the audio path branches before the capacitor and each uses different caps\nit may create phase problems. You can try using a single cap.
TEXT 8240 200 Left 2 ;quite experimental. may introduce distortion for small knee widths (hard knee = distortion)\nthis is because of the use of the tanh() function
TEXT 576 -3304 Left 2 !.param knee=0.95
TEXT 576 -3272 Left 2 !.param ratio_ctrl=100
TEXT 576 -3240 Left 2 !.param threshold = 0.5
TEXT 5808 752 Left 2 ;LP filter potentiometer
TEXT 576 -3208 Left 2 !.param attack = 100
TEXT 576 -3176 Left 2 !.param release = 100
TEXT 568 -3352 Left 5 ;COMPRESSOR PARAMETERS
TEXT -88 -3304 Left 2 !;.step param knee 0.85 0.98 0.02
TEXT -88 -3264 Left 2 !;.step param ratio_ctrl 1 50 5
TEXT -88 -3176 Left 2 !;.step param attack 0.3 1 0.1
TEXT -88 -3216 Left 2 !;.step dec param tanh_gain_in 100 10000 3
TEXT 584 -3144 Left 2 !.param tanh_gain_in = 4000
TEXT 18672 48 Left 2 ;35.3456k
TEXT -232 -3080 Left 2 ;ratio_ctrl not the actual ratio
TEXT -224 -2976 Left 2 ;APPROXIMATIVE TABLE :\nratio_ctrl      ratio\n6                 1.31\n11                1.85\n16                2.47\n21                3.22\n26                4.11\n31                5.22\n36                6.25\n41                8.4\n46                10.2\n51                 12.2
TEXT -88 -3136 Left 2 !;.step param threshold 0.1 1 0.1
TEXT 1792 -3248 Left 2 ;www.skynext.tech
TEXT 1792 -3280 Left 5 ;Author : R.Verissimo
TEXT 1800 -3176 Left 2 ;release 0.91 05/09/2023
TEXT -5848 -1592 Left 2 !.SUBCKT pot 1 2 3 T=0.5 R=10k\n.param tap={limit(T,1m,.999)}\nR0 1 3 {R*(1-tap)}\nR1 3 2 {R*tap}\n.ENDS\n \n.SUBCKT exppot 1 2 3 T=0.5\n.param tap={limit(T,1m,.999)}\n.param stiff={limit(stiff,1,10000)}\n \nR0 1 3 {R*exp(-tap*ln(R*stiff))}\nR1 3 2 {R*(1-exp(-tap*ln(R*stiff)))}\n.ENDS
TEXT -5880 -3432 Left 0 !*                 Iin          \n*                  |  Ec+ \n*                  |   |   Ec-\n*                  |   |   |  Vee \n*                  |   |   |   |  GND\n*                  |   |   |   |   |  Vcc \n*                  |   |   |   |   |   |  Iout\n*                  |   |   |   |   |   |   |\n.SUBCKT THAT2180A  1   2   3   4   5   6   7 \n*\n*\n*\nR1         10 13  2.5k  \nR2         10 14  2.5k  \nI1         10 29 DC 50uA  \nR3         11 7  8k  \nR4         12 7  8k  \nG1         7 15 11 12 1.25e-4\nR5         0 15  10MEG  \nR6         0 16  10k  \nC1         16 15  10p  \nR7         19 7  2k  \nG2         19 20 15 0 5e-4\nC2         19 7  8p  \nE1         20 28 30 6 2\nR8         5 29  1.7k  \nV1         0 29 DC 2.1V  \nI2         0 30 DC 20uA  \nR9         4 2  27  \nC3         20 0  12p  \nI3         20 28 DC 220uA  \nV2         18 0 DC .7V  \nV3         17 15 DC 1.4V  \nQ1         11 1 13 QNHIB \nQ2         12 9 14 QNHIB \nQ3         20 21 23 QNPNNOM \nQ4         20 22 24 QNPNNOM \nQ5         8 4 27 QNPNNOM \nQ6         1 25 26 QNPNNOM \nQ7         1 2 23 QPNPNOM \nQ8         8 3 24 QPNPNOM \nQ9         28 28 27 QPNPNOM \nQ10        28 28 26 QPNPNOM \nQ11        28 29 5 QNPNNOM \nQ12        30 30 31 QNPNNOM \nQ13        0 0 31 QPNPNOM \nD1         18 15 DNOM \nD2         17 7 DNOM \nR10        3 25  20  \nR11        22 20 20 \nR12        21 20 27  \nVos        9 6 DC 3mV  \nIsym       0 4 DC -420nA  \n*    Isym = -420nA for typical THD.  Set to -1uA for worst case THD.\n.model qnpnnom npn (is=1e-15 bf=200, vaf=110, cjc=3pF)\n.model qpnpnom pnp (is=1e-15 bf=100, vaf=85, cjc=5pf)\n.model qnhib npn (bf=16000)\n.model dnom d (is=1e-15)\n.ENDS
TEXT -7584 -3616 Left 0 !*                      Positive Supply\n*                      |   Gain Control\n*                      |   |   Non-Inverting Input \n*                      |   |   |   Gain Setting Resistor Terminals\n*                      |   |   |     |   |  Inverting Input\n*                      |   |   |     |   |    |  Negative Supply\n*                      |   |   |     |   |    |   |  Reference Voltage \n*                      |   |   |     |   |    |   |   |  Output\n*                      |   |   |     |   |    |   |   |    |\n*                      |   |   |     |   |    |   |   |    |    Feedback\n*                      |   |   |     |   |    |   |   |    |      |\n.SUBCKT VCA824 +Vcc VG +Vin +Rg -Rg -Vin -Vcc Vref Out Gnd FB\n \nX_U5_F8    U5_N00257 U5_N00297 N09821 -VCC VCA82X_BIAS_U5_F8 \nX_U5_F1    U5_N00167 U5_N00177 +VCC N06304 VCA82X_BIAS_U5_F1 \nV_U5_V1         U5_N00167 U5_N00195 0.433V\nE_U5_E1         U5_N00195 -VCC +VCC -VCC 0.5\nX_U5_F6    U5_N00297 U5_N00251 N08923 -VCC VCA82X_BIAS_U5_F6 \nX_U5_F3    U5_N00177 U5_N00183 +VCC N08572 VCA82X_BIAS_U5_F3 \nX_U5_F4    U5_N00183 U5_N00189 +VCC N08740 VCA82X_BIAS_U5_F4 \nX_U5_F2    U5_N00189 U5_N00257 +VCC N10100 VCA82X_BIAS_U5_F2 \nX_U5_F5    U5_N00251 U5_N00205 N07015 -VCC VCA82X_BIAS_U5_F5 \nR_U5_R3         U5_N00195 U5_N00205  1k  \nQ_U6_Q24         N06304 U6_N16946 U6_N15431 NPN8 {x1}\nR_U6_R15         U6_N26012 +VCC  300  \nR_U6_R20         U6_N49467 U6_N46592  100  \nR_U6_R24         -VIN U6_N336522  150  \nQ_U6_Q23         U6_N00503 U6_N16946 U6_N13215 NPN8 {x6}\nC_U6_C3         U6_N334753 U6_N334801  10m  TC=0,0 \nC_U6_C1         U6_N00709 U6_N22036  0.5p  \nQ_U6_Q28         U6_N22036 U6_N07222 U6_N26012 PNP8 {x6}\nQ_U6_Q29         U6_N07222 U6_N07222 U6_N612661 PNP8 {x2}\nQ_U6_Q37         U6_N49467 U6_N16946 U6_N49758 NPN8 {x6}\nR_U6_R13         -VCC U6_N19410  2k  \nD_U6_U1         U6_N334753 U6_N334759 dn3 \nR_U6_R21         U6_N57293 +VCC  300  \nQ_U6_Q30         N07015 U6_N07222 U6_N29549 PNP8 {x2}\nR_U6_R18         -VCC U6_N36767  160  \nR_U6_R25         U6_N3853581 +RG  10  \nQ_U6_Q32         +RG U6_N16946 U6_N36767 NPN8 {x6}\nE_U6_E1         U6_N00709 -VCC +VCC -VCC 0.5\nR_U6_R23         +VIN U6_N336330  150  \nQ_U6_Q36         U6_N46276 U6_N46276 U6_N46592 NPN8 {x14}\nI_U6_I1         U6_N334759 U6_N334753 DC 1.5u  \nQ_U6_Q26         U6_N16946 U6_N16946 U6_N19410 NPN8 {x2}\nQ_U6_Q25         +VCC N06304 U6_N16946 NPN8 {x2}\nQ_U6_Q40         U6_N42606 U6_N07222 U6_N57293 PNP8 {x6}\nQ_U6_Q22         U6_N04782 U6_N04782 U6_N10900 NPN8 {x14}\nQ_U6_Q21         +VCC U6_N336330 U6_N04782 NPN8 {x14}\nR_U6_R14         U6_N612661 +VCC  2k  \nR_U6_R17         -VCC U6_N13215  160  \nQ_U6_Q34         +VCC U6_N336522 U6_N46276 NPN8 {x14}\nQ_U6_Q33         N08372 U6_N22036 +RG NPN8 {x14}\nR_U6_R22         -VCC U6_N51427  160  \nE_U6_E2         U6_N334759 -VCC +VCC -VCC 0.5\nR_U6_R19         -VCC U6_N49758  160  \nQ_U6_Q27         U6_N22036 +RG U6_N00503 NPN8 {x14}\nQ_U6_Q31         -VCC N07015 U6_N07222 PNP8 {x2}\nC_U6_C2         U6_N00709 U6_N42606  0.5p  \nQ_U6_Q38         U6_N42606 -RG U6_N49467 NPN8 {x14}\nX_U6_F1    U6_N334801 U6_N334759 U6_N336330 U6_N334759\n+  VCA82X_INPUT_BUFFER_U6_F1 \nR_U6_R11         U6_N29549 +VCC  900  \nE_U6_E4         U6_N3853202 -VCC +VCC -VCC 0.5\nQ_U6_Q39         -RG U6_N16946 U6_N51427 NPN8 {x6}\nR_U6_R16         U6_N00503 U6_N10900  100  \nR_U6_R12         -VCC U6_N15431  955  \nQ_U6_Q35         N08468 U6_N42606 -RG NPN8 {x14}\nC_U6_C5         U6_N3853202 U6_N3853581  0.88p  TC=0,0 \nR_U7_R27         -VCC U7_N01059  800  \nQ_U7_Q56         U7_N65219 U7_N65219 U7_N64914 NPN8 {x4}\nQ_U7_Q60         U7_N107420 U7_N89137 U7_N81704 NPN8 {x12}\nQ_U7_Q86         U7_N168308 U7_N167450 U7_N168596 NPN8 {x16}\nQ_U7_Q77         U7_N137141 U7_N137141 U7_N142127 PNP8 {x16}\nR_U7_R25         GND U7_N89137  50  \nR_U7_R23         -VCC U7_N01019  100  \nQ_U7_Q59         U7_N86791 U7_N65219 U7_N01059 NPN8 {x1}\nR_U7_R28         -VCC U7_N01061  200  \nR_U7_R32         GND U7_N160714  50  \nR_U7_R17         -VCC U7_N55967  100  \nR_U7_R37         U7_N145504 +VCC  110  \nQ_U7_Q45         U7_N34597 U7_N34597 U7_N34298 PNP8 {x12}\nQ_U7_Q87         U7_N167450 U7_N167450 U7_N168824 NPN8 {x16}\nQ_U7_Q84         U7_N165781 U7_N165781 U7_N168308 NPN8 {x16}\nQ_U7_Q62         U7_N01231 U7_N65219 U7_N01061 NPN8 {x4}\nR_U7_R11         U7_N34298 +VCC  160  \nQ_U7_Q79         U7_N01317 U7_N142759 U7_N145504 PNP8 {x16}\nQ_U7_Q80         N08740 U7_N01231 U7_N137141 PNP8 {x16}\nQ_U7_Q52         U7_N53649 U7_N65219 U7_N55659 NPN8 {x8}\nR_U7_R22         U7_N81704 U7_N82314  1k  \nQ_U7_Q49         U7_N01387 U7_N01387 U7_N37408 PNP8 {x12}\nR_U7_R21         U7_N01001 +VCC  740  \nQ_U7_Q78         U7_N142759 U7_N142759 U7_N145276 PNP8 {x16}\nR_U7_R13         U7_N1695201 VG  50  \nQ_U7_Q61         U7_N116536 U7_N86791 U7_N82314 NPN8 {x12}\nQ_U7_Q88         N08740 U7_N160714 N08923 NPN8 {x2}\nQ_U7_Q65         U7_N01387 U7_N01387 U7_N107420 NPN8 {x12}\nQ_U7_Q63         U7_N01317 U7_N65219 U7_N01207 NPN8 {x4}\nR_U7_R34         U7_N142127 +VCC  110  \nQ_U7_Q85         FB U7_N165781 U7_N167450 NPN8 {x16}\nR_U7_R39         N08923 U7_N1690600  50  \nQ_U7_Q70         U7_N119904 U7_N119904 U7_N122147 PNP8 {x16}\nR_U7_R29         -VCC U7_N01207  200  \nQ_U7_Q55         N08572 U7_N65219 U7_N67656 NPN8 {x2}\nQ_U7_Q71         U7_N122683 U7_N122683 U7_N119904 PNP8 {x16}\nR_U7_R31         -VCC U7_N168596  200  \nQ_U7_Q68         U7_N116528 U7_N116512 U7_N01001 PNP8 {x12}\nQ_U7_Q69         U7_N116536 U7_N116536 U7_N116528 PNP8 {x12}\nQ_U7_Q74         U7_N122683 U7_N01351 N08468 NPN8 {x16}\nR_U7_R26         U7_N86791 GND  4.1k  \nR_U7_R24         -VCC U7_N01017  100  \nQ_U7_Q57         U7_N81704 U7_N65219 U7_N01017 NPN8 {x8}\nR_U7_R38         U7_N122147 +VCC  110  \nQ_U7_Q47         U7_N37110 U7_N34597 U7_N34058 PNP8 {x12}\nQ_U7_Q51         U7_N01387 U7_N45862 U7_N53649 NPN8 {x12}\nQ_U7_Q46         U7_N01351 U7_N37408 U7_N34597 PNP8 {x12}\nQ_U7_Q50         U7_N01351 U7_N1695201 U7_N51592 NPN8 {x12}\nR_U7_R18         -VCC U7_N55659  100  \nQ_U7_Q81         FB U7_N01317 U7_N142759 PNP8 {x16}\nR_U7_R16         -VCC U7_N67656  400  \nR_U7_R15         U7_N51592 U7_N53649  1k  \nQ_U7_Q66         U7_N116512 U7_N116512 U7_N01003 PNP8 {x12}\nR_U7_R35         U7_N145276 +VCC  110  \nQ_U7_Q72         U7_N122683 U7_N01351 N08372 NPN8 {x16}\nR_U7_R19         -VCC U7_N64914  1.4k  \nQ_U7_Q58         U7_N82314 U7_N65219 U7_N01019 NPN8 {x8}\nR_U7_R30         -VCC U7_N168824  200  \nR_U7_R20         U7_N01003 +VCC  740  \nR_U7_R12         U7_N34058 +VCC  160  \nQ_U7_Q53         U7_N51592 U7_N65219 U7_N55967 NPN8 {x8}\nQ_U7_Q76         U7_N01231 U7_N137141 U7_N141896 PNP8 {x16}\nQ_U7_Q54         +VCC N08572 U7_N65219 NPN8 {x4}\nQ_U7_Q67         U7_N107420 U7_N116536 U7_N116512 PNP8 {x12}\nR_U7_R36         U7_N141896 +VCC  110  \nR_U7_R33         U7_N142127 U7_N145276  2k  \nQ_U7_Q73         U7_N01231 U7_N01387 N08372 NPN8 {x16}\nQ_U7_Q75         U7_N01317 U7_N01387 N08468 NPN8 {x16}\nQ_U7_Q48         U7_N37408 U7_N37408 U7_N37110 PNP8 {x12}\nQ_U7_Q64         U7_N01351 U7_N01351 U7_N107420 NPN8 {x12}\nR_U7_R14         GND U7_N45862  50  \nQ_U7_Q82         U7_N165781 U7_N1690600 N08740 PNP8 {x16}\nQ_U8_Q38         U8_N01099 U8_N38844 U8_N39084 PNP8 {x14}\nR_U8_R18         U8_N01099 U8_N82756  125  \nQ_U8_Q49         U8_N78893 U8_N78893 U8_N80276 NPN8 {x5}\nE_U8_E2         U8_N389559 -VCC +VCC -VCC 0.5\nR_U8_R24         U8_N163888 FB  0.01  \nR_U8_R23         VREF U8_N52536  10  \nR_U8_R10         U8_N23775 U8_N13605  600  \nQ_U8_Q47         U8_N75689 U8_N78893 U8_N73458 NPN8 {x3}\nR_U8_R13         U8_N00843 U8_N13605  250  \nX_U8_F1    U8_N389453 U8_N389559 VREF U8_N389559 VCA821_4_OUTPUT_STAGE_U8_F1 \nQ_U8_Q45         U8_N63102 N10100 U8_N66552 NPN8 {x2}\nC_U8_C7         U8_N00839 U8_N13605  0.85p  TC=0,0 \nQ_U8_Q39         U8_N13605 U8_N38844 U8_N84507 NPN8 {x14}\nQ_U8_Q52         OUT U8_N91269 -VCC NPN8 {x60}\nQ_U8_Q36         U8_N39084 U8_N31052 U8_N32378 PNP8 {x6}\nR_U8_R16         U8_N01099 U8_N80276  150  \nQ_U8_Q43         U8_N75689 U8_N63102 U8_N163888 PNP8 {x8}\nR_U8_R21         +VCC U8_N13605  20  \nQ_U8_Q50         U8_N84507 U8_N78893 U8_N82756 NPN8 {x6}\nC_U8_C8         U8_N01099 U8_N80276  0.85p  TC=0,0 \nQ_U8_Q33         U8_N01025 N09821 U8_N24027 PNP8 {x2}\nQ_U8_Q41         U8_N35588 U8_N01025 U8_N163888 NPN8 {x8}\nR_U8_R11         U8_N01099 U8_N67452  600  \nD_U8_D14         U8_N73458 U8_N01099 DX \nQ_U8_Q42         U8_N63102 U8_N63102 U8_N52536 PNP8 {x8}\nQ_U8_Q35         U8_N31052 U8_N31052 U8_N00839 PNP8 {x5}\nQ_U8_Q32         U8_N24027 U8_N24027 U8_N23775 PNP8 {x2}\nQ_U8_Q51         U8_N91269 U8_N91269 -VCC NPN8 {x60}\nD_U8_D17         U8_N163888 U8_N1399050 DX \nQ_U8_Q62         U8_N01099 U8_N38844 U8_N39084 PNP8 {x8}\nQ_U8_Q61         U8_N13605 U8_N38844 U8_N84507 NPN8 {x8}\nD_U8_U1         U8_N389449 U8_N389559 dn3\nQ_U8_Q34         U8_N35588 U8_N31052 U8_N00843 PNP8 {x3}\nC_U8_C2         U8_N38844 U8_N13605  0.89p  \nD_U8_D18         U8_N1399050 U8_N52536 DX \nR_U8_R12         U8_N01099 U8_N67680  600  \nQ_U8_Q59         U8_N114858 U8_N114858 +VCC PNP8 {x60}\nD_U8_D16         U8_N1375710 U8_N163888 DX \nQ_U8_Q46         U8_N66552 U8_N66552 U8_N67680 NPN8 {x2}\nQ_U8_Q44         N10100 U8_N66552 U8_N67452 NPN8 {x2}\nQ_U8_Q60         OUT U8_N114858 +VCC PNP8 {x60}\nR_U8_R14         U8_N00839 U8_N13605  150  \nQ_U8_Q58         U8_N114858 U8_N39084 OUT NPN8 {x60}\nI_U8_I1         U8_N389559 U8_N389449 DC 3.12u  \nQ_U8_Q37         U8_N38844 U8_N35588 U8_N31052 PNP8 {x3}\nR_U8_R17         U8_N32378 U8_N13605  125  \nC_U8_C3         U8_N01099 U8_N38844  0.89p  \nR_U8_R9         U8_N19796 U8_N13605  600  \nQ_U8_Q48         U8_N38844 U8_N75689 U8_N78893 NPN8 {x3}\nR_U8_R19         -VCC U8_N01099  20  \nD_U8_D12         U8_N13605 U8_N00839 DX \nQ_U8_Q31         N09821 U8_N24027 U8_N19796 PNP8 {x2}\nD_U8_D13         U8_N52536 U8_N1375710 DX \nR_U8_R25         OUT OUT  10  \nQ_U8_Q53         U8_N91269 U8_N84507 OUT PNP8 {x60}\nC_U8_C6         U8_N389449 U8_N389453  10m  \nD_U8_D11         U8_N13605 U8_N00843 DX \nQ_U8_Q40         U8_N01025 U8_N01025 U8_N52536 NPN8 {x8}\nR_U8_R15         U8_N01099 U8_N73458  250  \nD_U8_D15         U8_N80276 U8_N01099 DX \n \n.PARAM  x4={x2*2} x5={x1*5} x12={x6*2} x6={x2*3} x24={x1*24} x8=1 x14={x2*7}\n+  x16={x8*2} x18={x1*18} x90={x1*90} x60={x12*5} x1={x2/2} x2={x8/4} x30={x1*30}\n+  x3={x1*3}\n \n.MODEL DN3 D( IS=.1F AF=1.0 KF=39.0E-17)\n \n.model dx       d(is=0.1p rs=.1 cjo=2p tt=1p bv=100 ibv=0.1p)\n \n.model NPN8 npn\n \n+ is=7.604e-018\n+ bf=157\n+ nf=1\n+ vaf=78.71\n+ ikf=0.03975\n+ ise=3.219e-014\n+ ne=2\n+ br=0.7614\n+ nr=1\n+ var=1.452\n+ ikr=0.08172\n+ isc=7.618e-021\n+ nc=1.847\n+ rb=106\n+ irb=0\n+ rbm=2.4\n+ re=2.52\n+ rc=127\n+ cje=1.12e-013\n+ vje=0.7591\n+ mje=0.5406\n+ tf=1.213e-011\n+ xtf=2.049\n+ vtf=1.813\n+ itf=0.04293\n+ ptf=0\n+ cjc=8.208e-015\n+ vjc=0.6666\n+ mjc=0.4509\n+ xcjc=0.0845\n+ tr=4e-011\n+ cjs=1.16e-013\n+ vjs=0.5286\n+ mjs=0.4389\n+ xtb=1.022\n+ eg=1.12\n+ xti=1.78\n+ kf=3.5e-016\n+ af=1\n+ fc=0.8273\n \n \n.model PNP8 pnp\n \n+ is=7.999e-018\n+ bf=141.8\n+ nf=1\n+ vaf=41.58\n+ ikf=0.1085\n+ ise=2.233e-015\n+ ne=1.505\n+ br=32.52\n+ nr=1.05\n+ var=1.093\n+ ikr=5e-005\n+ isc=6.621e-016\n+ nc=1.15\n+ rb=62.46\n+ irb=0\n+ rbm=2.24\n+ re=2.537\n+ rc=126\n+ cje=9.502e-014\n+ vje=0.732\n+ mje=0.493\n+ tf=1.303e-011\n+ xtf=35\n+ vtf=3.259\n+ itf=0.2639\n+ ptf=0\n+ cjc=1.08e-013\n+ vjc=0.7743\n+ mjc=0.5\n+ xcjc=0.08504\n+ tr=1.5e-010\n+ cjs=1.29e-013\n+ vjs=0.9058\n+ mjs=0.4931\n+ xtb=1.732\n+ eg=1.12\n+ xti=2\n+ kf=3.5e-016\n+ af=1\n+ fc=0.85\n \n.ENDS VCA824\n \n.subckt VCA82X_BIAS_U5_F8 1 2 3 4  \nF_U5_F8         3 4 VF_U5_F8 1\nVF_U5_F8         1 2 0V\n.ends VCA82X_BIAS_U5_F8\n \n.subckt VCA82X_BIAS_U5_F1 1 2 3 4  \nF_U5_F1         3 4 VF_U5_F1 1.05\nVF_U5_F1         1 2 0V\n.ends VCA82X_BIAS_U5_F1\n \n.subckt VCA82X_BIAS_U5_F6 1 2 3 4  \nF_U5_F6         3 4 VF_U5_F6 1\nVF_U5_F6         1 2 0V\n.ends VCA82X_BIAS_U5_F6\n \n.subckt VCA82X_BIAS_U5_F3 1 2 3 4  \nF_U5_F3         3 4 VF_U5_F3 1\nVF_U5_F3         1 2 0V\n.ends VCA82X_BIAS_U5_F3\n \n.subckt VCA82X_BIAS_U5_F4 1 2 3 4  \nF_U5_F4         3 4 VF_U5_F4 1\nVF_U5_F4         1 2 0V\n.ends VCA82X_BIAS_U5_F4\n \n.subckt VCA82X_BIAS_U5_F2 1 2 3 4  \nF_U5_F2         3 4 VF_U5_F2 1\nVF_U5_F2         1 2 0V\n.ends VCA82X_BIAS_U5_F2\n \n.subckt VCA82X_BIAS_U5_F5 1 2 3 4  \nF_U5_F5         3 4 VF_U5_F5 1.05\nVF_U5_F5         1 2 0V\n.ends VCA82X_BIAS_U5_F5\n \n.subckt VCA82X_INPUT_BUFFER_U6_F1 1 2 3 4  \nF_U6_F1         3 4 VF_U6_F1 20\nVF_U6_F1         1 2 0V\n.ends VCA82X_INPUT_BUFFER_U6_F1\n \n.subckt VCA821_4_OUTPUT_STAGE_U8_F1 1 2 3 4  \nF_U8_F1         3 4 VF_U8_F1 600\nVF_U8_F1         1 2 0V\n.ends VCA821_4_OUTPUT_STAGE_U8_F1
TEXT -5864 -2552 Left 0 !* TL072 OPERATIONAL AMPLIFIER "MACROMODEL" SUBCIRCUIT\n* CREATED USING PARTS RELEASE 4.01 ON 06/16/89 AT 13:08\n* (REV N/A)      SUPPLY VOLTAGE: +/-15V\n* CONNECTIONS:   NON-INVERTING INPUT\n*                | INVERTING INPUT\n*                | | POSITIVE POWER SUPPLY\n*                | | | NEGATIVE POWER SUPPLY\n*                | | | | OUTPUT\n*                | | | | |\n.SUBCKT TL072    1 2 3 4 5\n*\n  C1   11 12 3.498E-12\n  C2    6  7 15.00E-12\n  DC    5 53 DX\n  DE   54  5 DX\n  DLP  90 91 DX\n  DLN  92 90 DX\n  DP    4  3 DX\n  EGND 99  0 POLY(2) (3,0) (4,0) 0 .5 .5\n  FB    7 99 POLY(5) VB VC VE VLP VLN 0 4.715E6 -5E6 5E6 5E6 -5E6\n  GA    6  0 11 12 282.8E-6\n  GCM   0  6 10 99 8.942E-9\n  ISS   3 10 DC 195.0E-6\n  HLIM 90  0 VLIM 1K\n  J1   11  2 10 JX\n  J2   12  1 10 JX\n  R2    6  9 100.0E3\n  RD1   4 11 3.536E3\n  RD2   4 12 3.536E3\n  RO1   8  5 150\n  RO2   7 99 150\n  RP    3  4 2.143E3\n  RSS  10 99 1.026E6\n  VB    9  0 DC 0\n  VC    3 53 DC 2.200\n  VE   54  4 DC 2.200\n  VLIM  7  8 DC 0\n  VLP  91  0 DC 25\n  VLN   0 92 DC 25\n.MODEL DX D(IS=800.0E-18)\n.MODEL JX PJF(IS=15.00E-12 BETA=270.1E-6 VTO=-1)\n.ENDS
